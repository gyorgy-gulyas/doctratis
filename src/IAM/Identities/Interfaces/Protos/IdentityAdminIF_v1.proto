
// <auto-generated>
//     This code was generated by d3i.interpreter
//
//     Changes to this file may cause incorrect behavior and will be lost if the code is regenerated.
// </auto-generated>
syntax = "proto3";

option csharp_namespace = "IAM.Identities.Protos.IdentityAdminIF_v1";
option java_outer_classname = "IdentityAdminIF_v1";
option java_package = "com.Identities";
option java_multiple_files = true;

package IAM.Identities;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "servicekit/error.proto";

service IdentityAdminIF_v1 {
	rpc RegisterLdapDomain(IdentityAdminIF_v1_RegisterLdapDomainRequest) returns (IdentityAdminIF_v1_RegisterLdapDomainResponse);
	rpc GetAllRegisteredLdapDomain(google.protobuf.Empty) returns (IdentityAdminIF_v1_GetAllRegisteredLdapDomainResponse);
	rpc GetRegisteredLdapDomain(IdentityAdminIF_v1_GetRegisteredLdapDomainRequest) returns (IdentityAdminIF_v1_GetRegisteredLdapDomainResponse);
	rpc UpdateRegisteredLdapDomain(IdentityAdminIF_v1_UpdateRegisteredLdapDomainRequest) returns (IdentityAdminIF_v1_UpdateRegisteredLdapDomainResponse);
	rpc getAllAccount(google.protobuf.Empty) returns (IdentityAdminIF_v1_getAllAccountResponse);
	rpc getAccount(IdentityAdminIF_v1_getAccountRequest) returns (IdentityAdminIF_v1_getAccountResponse);
	rpc createAccount(IdentityAdminIF_v1_createAccountRequest) returns (IdentityAdminIF_v1_createAccountResponse);
	rpc updateAccount(IdentityAdminIF_v1_updateAccountRequest) returns (IdentityAdminIF_v1_updateAccountResponse);
	rpc listAuthsForAccount(IdentityAdminIF_v1_listAuthsForAccountRequest) returns (IdentityAdminIF_v1_listAuthsForAccountResponse);
	rpc setActiveForAuth(IdentityAdminIF_v1_setActiveForAuthRequest) returns (IdentityAdminIF_v1_setActiveForAuthResponse);
	rpc createtEmailAuth(IdentityAdminIF_v1_createtEmailAuthRequest) returns (IdentityAdminIF_v1_createtEmailAuthResponse);
	rpc getEmailAuth(IdentityAdminIF_v1_getEmailAuthRequest) returns (IdentityAdminIF_v1_getEmailAuthResponse);
	rpc changePasswordOnEmailAuth(IdentityAdminIF_v1_changePasswordOnEmailAuthRequest) returns (IdentityAdminIF_v1_changePasswordOnEmailAuthResponse);
	rpc setTwoFactorOnEmailAuth(IdentityAdminIF_v1_setTwoFactorOnEmailAuthRequest) returns (IdentityAdminIF_v1_setTwoFactorOnEmailAuthResponse);
	rpc confirmEmail(IdentityAdminIF_v1_confirmEmailRequest) returns (IdentityAdminIF_v1_confirmEmailResponse);
	rpc createADAuth(IdentityAdminIF_v1_createADAuthRequest) returns (IdentityAdminIF_v1_createADAuthResponse);
	rpc getADAuth(IdentityAdminIF_v1_getADAuthRequest) returns (IdentityAdminIF_v1_getADAuthResponse);
	rpc setTwoFactorOnADAuth(IdentityAdminIF_v1_setTwoFactorOnADAuthRequest) returns (IdentityAdminIF_v1_setTwoFactorOnADAuthResponse);
	rpc createKAUAuth(IdentityAdminIF_v1_createKAUAuthRequest) returns (IdentityAdminIF_v1_createKAUAuthResponse);
	rpc getKAUAuth(IdentityAdminIF_v1_getKAUAuthRequest) returns (IdentityAdminIF_v1_getKAUAuthResponse);
	rpc setTwoFactorOnKAUAuth(IdentityAdminIF_v1_setTwoFactorOnKAUAuthRequest) returns (IdentityAdminIF_v1_setTwoFactorOnKAUAuthResponse);
	rpc createCertificateAuthFromCSR(IdentityAdminIF_v1_createCertificateAuthFromCSRRequest) returns (IdentityAdminIF_v1_createCertificateAuthFromCSRResponse);
	rpc revokeCertificate(IdentityAdminIF_v1_revokeCertificateRequest) returns (IdentityAdminIF_v1_revokeCertificateResponse);
	rpc getCertificateAuth(IdentityAdminIF_v1_getCertificateAuthRequest) returns (IdentityAdminIF_v1_getCertificateAuthResponse);
}

message IdentityAdminIF_v1_RegisterLdapDomainRequest {
	LdapDomainDTO ldap = 1;
}

message IdentityAdminIF_v1_RegisterLdapDomainResponse {
	oneof result {
		LdapDomainDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}
message IdentityAdminIF_v1_GetAllRegisteredLdapDomainResponse {
	oneof result {
		list_LdapDomainSummaryDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_GetRegisteredLdapDomainRequest {
	string id = 1;
}

message IdentityAdminIF_v1_GetRegisteredLdapDomainResponse {
	oneof result {
		LdapDomainDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_UpdateRegisteredLdapDomainRequest {
	LdapDomainDTO ldap = 1;
}

message IdentityAdminIF_v1_UpdateRegisteredLdapDomainResponse {
	oneof result {
		LdapDomainDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}
message IdentityAdminIF_v1_getAllAccountResponse {
	oneof result {
		list_AccountSummaryDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_getAccountRequest {
	string id = 1;
}

message IdentityAdminIF_v1_getAccountResponse {
	oneof result {
		AccountDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_createAccountRequest {
	string username = 1;
	AccountTypes accountType = 2;
}

message IdentityAdminIF_v1_createAccountResponse {
	oneof result {
		AccountDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_updateAccountRequest {
	string accountId = 1;
	string etag = 2;
	AccountDataDTO data = 3;
}

message IdentityAdminIF_v1_updateAccountResponse {
	oneof result {
		AccountDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_listAuthsForAccountRequest {
	string accountId = 1;
}

message IdentityAdminIF_v1_listAuthsForAccountResponse {
	oneof result {
		list_AuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_setActiveForAuthRequest {
	string accountId = 1;
	string authId = 2;
	bool isActive = 3;
}

message IdentityAdminIF_v1_setActiveForAuthResponse {
	oneof result {
		AuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_createtEmailAuthRequest {
	string accountId = 1;
	string email = 2;
	string initialPassword = 3;
	TwoFactorConfigurationDTO twoFactor = 4;
}

message IdentityAdminIF_v1_createtEmailAuthResponse {
	oneof result {
		EmailAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_getEmailAuthRequest {
	string accountId = 1;
	string authId = 2;
}

message IdentityAdminIF_v1_getEmailAuthResponse {
	oneof result {
		EmailAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_changePasswordOnEmailAuthRequest {
	string accountId = 1;
	string authId = 2;
	string etag = 3;
	string newPassword = 4;
}

message IdentityAdminIF_v1_changePasswordOnEmailAuthResponse {
	oneof result {
		EmailAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_setTwoFactorOnEmailAuthRequest {
	string accountId = 1;
	string authId = 2;
	string etag = 3;
	TwoFactorConfigurationDTO twoFactor = 4;
}

message IdentityAdminIF_v1_setTwoFactorOnEmailAuthResponse {
	oneof result {
		EmailAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_confirmEmailRequest {
	string token = 1;
}

message IdentityAdminIF_v1_confirmEmailResponse {
	oneof result {
		bool Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_createADAuthRequest {
	string accountId = 1;
	string ldapDomainId = 2;
	string adUsername = 3;
	TwoFactorConfigurationDTO twoFactor = 4;
}

message IdentityAdminIF_v1_createADAuthResponse {
	oneof result {
		ADAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_getADAuthRequest {
	string accountId = 1;
	string authId = 2;
}

message IdentityAdminIF_v1_getADAuthResponse {
	oneof result {
		ADAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_setTwoFactorOnADAuthRequest {
	string accountId = 1;
	string authId = 2;
	string etag = 3;
	TwoFactorConfigurationDTO twoFactor = 4;
}

message IdentityAdminIF_v1_setTwoFactorOnADAuthResponse {
	oneof result {
		ADAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_createKAUAuthRequest {
	string accountId = 1;
	string kauUserId = 2;
	TwoFactorConfigurationDTO twoFactor = 3;
}

message IdentityAdminIF_v1_createKAUAuthResponse {
	oneof result {
		KAUAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_getKAUAuthRequest {
	string accountId = 1;
	string authId = 2;
}

message IdentityAdminIF_v1_getKAUAuthResponse {
	oneof result {
		KAUAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_setTwoFactorOnKAUAuthRequest {
	string accountId = 1;
	string authId = 2;
	string etag = 3;
	TwoFactorConfigurationDTO twoFactor = 4;
}

message IdentityAdminIF_v1_setTwoFactorOnKAUAuthResponse {
	oneof result {
		KAUAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_createCertificateAuthFromCSRRequest {
	string accountId = 1;
	CsrInputDTO data = 2;
}

message IdentityAdminIF_v1_createCertificateAuthFromCSRResponse {
	oneof result {
		CertificateAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_revokeCertificateRequest {
	string accountId = 1;
	string authId = 2;
	string etag = 3;
	string reason = 4;
}

message IdentityAdminIF_v1_revokeCertificateResponse {
	oneof result {
		CertificateAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

message IdentityAdminIF_v1_getCertificateAuthRequest {
	string accountId = 1;
	string authId = 2;
}

message IdentityAdminIF_v1_getCertificateAuthResponse {
	oneof result {
		CertificateAuthDTO Value = 1;
		ServiceKit.Protos.Error Error = 2;
	}
}

enum AccountTypes {
	AccountTypes_User = 0;
	AccountTypes_ExternalSystem = 1;
	AccountTypes_InternalService = 2;
}

message LdapDomainDTO {
	message DomainController {
		/// Hostname or IP address of the DC
		string host = 1;
		/// LDAP or LDAPS port (e.g. 389 or 636)
		int32 port = 2;
	}

	string id = 1;
	string etag = 2;
	google.protobuf.Timestamp LastUpdate = 3;
	/// Fully Qualified Domain Name (e.g. yourdomain.local)
	string name = 4;
	/// Optional description or notes
	string description = 5;
	/// NetBIOS name (e.g. YOURDOMAIN)
	string netbiosName = 6;
	/// List of Domain Controller hostnames or IP addresses
	repeated DomainController domainControllers = 7;
	/// Base Distinguished Name (where LDAP queries start, e.g. DC=yourdomain,DC=local)
	string baseDn = 8;
	/// Whether to use secure LDAP (LDAPS)
	bool useSecureLdap = 9;
	/// Service account username used for directory queries (if required)
	string serviceAccountUser = 10;
	/// Service account password (should be stored securely/encrypted)
	string serviceAccountPassword = 11;
}

message LdapDomainSummaryDTO {
	string id = 1;
	/// Fully Qualified Domain Name (e.g. yourdomain.local)
	string name = 2;
	/// Optional description or notes
	string description = 3;
}

message AccountSummaryDTO {
	string id = 1;
	AccountTypes Type = 2;
	string Name = 3;
	bool isActive = 4;
}

message AccountDTO {
	string id = 1;
	string etag = 2;
	google.protobuf.Timestamp LastUpdate = 3;
	AccountDataDTO data = 4;
}

message AccountDataDTO {
	AccountTypes Type = 1;
	string Name = 2;
	bool isActive = 3;
	repeated ContactInfo contacts = 4;
}

message ContactInfo {
	string contactType = 1;
	string email = 2;
	string phoneNumber = 3;
}

message AuthDTO {

	enum Methods {
		Methods_Email = 0;
		Methods_ActiveDirectory = 1;
		Methods_KAU = 2;
		Methods_Certificate = 3;
	}

	string id = 1;
	Methods method = 2;
	bool isActive = 3;
}

message TwoFactorConfigurationDTO {

	enum Methods {
		/// Time-based One-Time Password (e.g. Google Authenticator)
		Methods_TOTP = 0;

		/// SMS-based OTP
		Methods_SMS = 1;

		/// Email-based OTP
		Methods_Email = 2;

	}

	bool enabled = 1;
	Methods method = 2;
	string phoneNumber = 3;
	string email = 4;
}

/// Password-based authentication
message EmailAuthDTO {
	string id = 1;
	string etag = 2;
	google.protobuf.Timestamp LastUpdate = 3;
	bool isActive = 4;
	string email = 5;
	bool isEmailConfirmed = 6;
	string passwordExpiresAt = 7;
	TwoFactorConfigurationDTO twoFactor = 8;
}

/// Active Directory-based authentication
message ADAuthDTO {
	string id = 1;
	string etag = 2;
	google.protobuf.Timestamp LastUpdate = 3;
	bool isActive = 4;
	/// Active Directory domain
	string LdapDomainId = 5;
	string LdapDomainName = 6;
	/// Active Directory username
	string userName = 7;
	/// Optional two-factor authentication settings (TOTP, SMS, Email)
	TwoFactorConfigurationDTO twoFactor = 8;
}

/// KAU Ügyfélkapu authentication
message KAUAuthDTO {
	string id = 1;
	string etag = 2;
	google.protobuf.Timestamp LastUpdate = 3;
	bool isActive = 4;
	/// Government-issued unique identifier (Ügyfélkapu ID)
	string KAUUserId = 5;
	/// User’s full legal name as returned by the service
	string legalName = 6;
	/// Email address verified by the service (optional)
	string email = 7;
	/// Optional two-factor authentication settings (TOTP, SMS, Email)
	TwoFactorConfigurationDTO twoFactor = 8;
}

/// Certificate-based authentication
message CertificateAuthDTO {
	string id = 1;
	string etag = 2;
	google.protobuf.Timestamp LastUpdate = 3;
	bool isActive = 4;
	string certificateThumbprint = 5;
	string serialNumber = 6;
	string issuer = 7;
	string subject = 8;
	string publicKeyHash = 9;
	google.protobuf.Timestamp validFrom = 10;
	google.protobuf.Timestamp validUntil = 11;
	bool isRevoked = 12;
	string revocationReason = 13;
	google.protobuf.Timestamp revokedAt = 14;
}

message CsrInputDTO {
	string csrPem = 1;
	/// CA profil/sablon (opcionális)
	string profile = 2;
}

message list_LdapDomainSummaryDTO {
	repeated LdapDomainSummaryDTO Value = 1;
}

message list_AccountSummaryDTO {
	repeated AccountSummaryDTO Value = 1;
}

message list_AuthDTO {
	repeated AuthDTO Value = 1;
}

